{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>JELAYAN CAPITAL</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <meta name="theme-color" content="#040404">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- CSS -->
  <link rel="stylesheet" href="{% static 'main/css/style.css' %}">

  <!-- GSAP (deferred) -->
  <script src="https://unpkg.com/gsap@3/dist/gsap.min.js" defer></script>
  <script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js" defer></script>
</head>
<body>
  <div class="main-line" aria-hidden="true"></div>

  <!-- NAVBAR -->
  <nav class="topnav" role="navigation" aria-label="Main">
    <div class="nav-inner">
      <div class="brand">JELAYAN CAPITAL</div>

      <!-- NAV TOGGLE (mobile) -->
      <button class="nav-toggle" aria-expanded="false" aria-label="Toggle menu">≡</button>

      <ul class="nav-links" role="menubar">
        <li role="none"><a role="menuitem" href="#thesis" class="nav-link active">THESIS</a></li>
        <li role="none"><a role="menuitem" href="#whatwedo" class="nav-link">WHAT WE DO</a></li>
        <li role="none"><a role="menuitem" href="#portfolio" class="nav-link">PORTFOLIO</a></li>
      </ul>
    </div>
  </nav>

  <div class="hero-bg" aria-hidden="true"></div>

  <main>
    <!-- SECTION 1: THESIS -->
    <section id="thesis" class="panel" tabindex="-1">
      <div class="panel-inner">
        <h3 class="eyebrow">THESIS</h3>
        <h1 class="big">
          We Believe in the Enduring Value Beneath Market Volatility
        </h1>
        <p class="sub">
          <strong>JELAYAN CAPITAL</strong>, founded and directed by 
      <strong>PRESCOBALDI JELAYAN PUTRA</strong>, views the digital asset landscape 
      not as a speculative frontier, but as an evolving arena of intrinsic value.  
      <br><br>
      Our philosophy is rooted in <em>Value Investing</em> — identifying assets with strong fundamentals, 
      limited supply, sustainable utility, and asymmetric long-term potential.  
      Market sentiment may shift, but value, when understood deeply, endures.
      <br><br>
      We combine the patience of traditional value frameworks with the structural insight 
      of modern markets — using both spot positions and futures instruments 
      to express conviction while managing risk with precision.
        </p>
      </div>
    </section>
    <!-- SECTION 2: WHAT WE DO -->
    <section id="whatwedo" class="panel panel--alt" tabindex="-1">
      <div class="panel-inner">
        <h3 class="eyebrow">WHAT WE DO</h3>
        <h1 class="big">We Invest with Patience and Precision</h1>
        <p class="sub">
          Guided by the principles of <strong>Value Investing</strong>, 
      <strong>JELAYAN CAPITAL</strong> — under the stewardship of 
      <strong>PRESCOBALDI JELAYAN PUTRA</strong> — seeks to uncover assets that trade 
      below their intrinsic worth yet possess enduring fundamentals.
      <br><br>
      We believe true alpha emerges not from noise or speed, 
      but from conviction built on research, discipline, and time.
      Every allocation, whether in spot or futures markets, 
      is constructed with a margin of safety and a long-term perspective.
        </p>
      </div>
    </section>

    <!-- SECTION 3: PORTFOLIO (updated) -->
    <section id="portfolio" class="panel" tabindex="-1">
       <!-- <h3 class="eyebrow" style="margin-top:-700px; margin-left:50px;">PORTFOLIO</h3> -->
      <div class="panel-inner portfolio-grid">
        <div class="port-row">
          <div class="port-card">
            <h2 class="port-title">Liquid Digital<br>Asset</h2>
            <div class="port-logos">
              <div class="logo-wrap">
                <img class="logo logo-color"
                     src="{% static 'main/images/BTC.png' %}"
                     srcset="{% static 'main/images/BTC.png' %} 2x, {% static 'main/images/BTC.png' %} 1x"
                     alt="Bitcoin logo" />
                <div class="logo-caption">Bitcoin (BTC)</div>
              </div>

              <div class="logo-wrap">
              </div>
            </div>
          </div>
          <div class="port-card">
            <h2 class="port-title">Venture<br>Equity</h2>
            <div class="port-logos">
              <div class="logo-wrap">
                <img class="logo logo-color" style="margin-left: 60px;" src="{% static 'main/images/MP.png' %}" />
              </div>
            </div>
          </div>
        </div>


        <p class="sub footer-note">
          <strong>JELAYAN CAPITAL</strong> — a private family office established by 
          <strong>PRESCOBALDI JELAYAN PUTRA</strong>. We do not raise external funds.
        </p>
      </div>
    </section>
  </main>

  <!-- JS: merged script (smooth scroll, nav toggle, GSAP fallback, lazy img) -->
  <script>
  document.addEventListener('DOMContentLoaded', function () {
    /* NAV LINK SMOOTH SCROLL + ACTIVE */
    const navLinks = document.querySelectorAll('.nav-link');
    navLinks.forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault();
        navLinks.forEach(l => l.classList.remove('active'));
        e.currentTarget.classList.add('active');
        const target = document.querySelector(e.currentTarget.getAttribute('href'));
        if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    });

    /* NAV TOGGLE (mobile) */
    const navToggle = document.querySelector('.nav-toggle');
    const navList = document.querySelector('.nav-links');
    navToggle.addEventListener('click', () => {
      const expanded = navToggle.getAttribute('aria-expanded') === 'true';
      navToggle.setAttribute('aria-expanded', String(!expanded));
      navList.classList.toggle('show');
    });

    /* Lazy-load images */
    const lazyImgs = document.querySelectorAll('img[data-src], img[srcset]');
    if ('IntersectionObserver' in window) {
      const io = new IntersectionObserver((entries, obs) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            // if data-src used
            if (img.dataset.src) {
              img.src = img.dataset.src;
              img.removeAttribute('data-src');
            }
            // srcset handled by browser automatically
            obs.unobserve(img);
          }
        });
      }, { rootMargin: '200px 0px' });
      lazyImgs.forEach(i => io.observe(i));
    }

    /* GSAP animations with fallback */
   if (window.gsap && window.ScrollTrigger) {
  gsap.registerPlugin(ScrollTrigger);

  // reveal tiap panel (biarin seperti semula)
  gsap.utils.toArray('.panel').forEach(panel => {
    gsap.from(panel.querySelectorAll('.eyebrow, .big, .sub'), {
      scrollTrigger: { trigger: panel, start: 'top 80%' },
      y: 40, opacity: 0, stagger: 0.15, duration: 1, ease: 'power3.out'
    });
  });

  // Parallax hero: desktop only
  if (window.innerWidth > 768) {
    const tl = gsap.timeline({
      scrollTrigger: {
        scrub: 0.6,
        start: 'top top',
        end: 'bottom bottom'
      }
    });

    // Geser pelan + zoom sedikit
    tl.to('.hero-bg', { yPercent: 8, ease: 'none' }, 0)
      .to('.hero-bg', { scale: 1.14, ease: 'none' }, 0); // dari 1.08 ke ~1.14
  }
} else {
  // fallback kalau GSAP mati
  document.querySelectorAll('.eyebrow, .big, .sub').forEach(el => el.style.opacity = 1);
}


    /* Highlight nav on scroll (IntersectionObserver) */
    if ('IntersectionObserver' in window) {
      const sections = document.querySelectorAll('.panel');
      const obs2 = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const id = entry.target.getAttribute('id');
            navLinks.forEach(a => a.classList.toggle('active', a.getAttribute('href') === `#${id}`));
          }
        });
      }, { threshold: 0.5 });
      sections.forEach(s => obs2.observe(s));
    }
  });
  </script>
</body>
</html>
